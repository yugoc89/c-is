require.config({paths:{classie:"/wp-content/themes/c-is/assets/js/components/classie",jquery:"/wp-content/themes/c-is/assets/js/vendor/jquery-1.10.2.min",underscore:"/wp-content/themes/c-is/assets/js/vendor/underscore-min",backbone:"/wp-content/themes/c-is/assets/js/vendor/backbone-min",TweenLite:"/wp-content/themes/c-is/assets/js/components/TweenMax.min",TimelineLite:"/wp-content/themes/c-is/assets/js/components/TimelineLite.min",hammer:"/wp-content/themes/c-is/assets/js/components/hammer.min",jqueryHammer:"/wp-content/themes/c-is/assets/js/components/jquery.hammer"},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},TweenLite:{exports:"TweenLite"}}}),require(["classie","backbone","TweenLite","TimelineLite","hammer","jqueryHammer"],function(t,e,i,n,o){"use strict";function a(){var t=!1;return function(e){(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t}function s(t){function e(){}i.defaultEase=Expo.easeInOut;var o=new n;o.to("#clipPath1 circle",.6,{attr:{r:60}}).to($("#clipPath1 circle"),.8,{css:{rotation:180}}).to("#clipPath1 circle",.7,{attr:{r:992}},"+=0.4").add(e).to($("#clipPath1 circle"),.8,{css:{rotation:0}})}function r(){var e=document.getElementById("navigation--sp"),i=document.getElementById("navigation-trigger"),n=(e.querySelector(".navigation-inner"),e.getElementsByTagName("a"),a()?"touchstart":"click"),o=document.createElement("div");o.className="overlay",document.body.appendChild(o);var s=function(){t.remove(i,"active"),t.remove(o,"active"),t.remove(e,"navigation--sp--opened"),document.body.style.overflowY="inherit"},r=function(){s(),o.removeEventListener(n,r)};i.addEventListener(n,function(i){i.preventDefault();t.has(this,"active")?s():(t.add(this,"active"),t.add(o,"active"),t.add(e,"navigation--sp--opened"),o.addEventListener(n,r),document.body.style.overflowY="hidden")}),$(document).on("click",".list--main a",function(t){t.preventDefault(),s()})}function c(){t.remove(N,"active"),t.remove(E,"show"),i.to(".ovelay--contact",.4,{x:"-100%",onComplete:function(){$(".overlay--contact").remove()}}),i.set(E,{alpha:0})}function l(e){function n(){t.add(N,"active"),t.add(E,"show");var n=document.createElement("div");n.className="overlay overlay--contact",document.body.appendChild(n),i.to(n,.4,{x:e,onComplete:function(){i.to(E,.3,{alpha:1})}})}function o(e){return e.preventDefault(),t.has(N,"active")?c():n(),!1}h(),N.addEventListener("click",o,!1),T.addEventListener("click",o,!1),C.addEventListener("click",o,!1)}function h(){function e(e){function o(){var e=document.createElement("div");e.id="form-messages",e.className="form-messages",document.body.appendChild(e);var o=$(E).serialize();$.ajax({type:"POST",url:$(E).attr("action"),data:o}).done(function(o){console.log("success!"),i.to(n,.4,{alpha:0,onComplete:function(){$("input, textarea").val(""),i.to(s,.4,{y:50}),s.innerHTML="Thank you! We'll be in touch.",t.addClass(s,"show"),setTimeout(function(){t.removeClass(s,"show"),c()},2e3)}});var a=$("#thanksPage",$(o));$(e).append(a)}).fail(function(t){""!==t.responseText?$(e).text(t.responseText):$(e).text("Oops! An error occured and your message could not be sent.")})}e.preventDefault();var r=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return""===a.value?(s.innerHTML="Please fill the blank.",t.addClass(s,"show"),!1):-1===a.value.search(r)?(s.innerHTML="Please provide a valid email address",!1):void o()}var n=E.querySelector(".form-inner"),o=E.querySelector(".submit"),a=E.querySelector(".email"),s=E.querySelector(".form-message");E.setAttribute("autocomplete","off"),o.addEventListener("click",e,!1)}var u=".container",d="#main",m=".container";$(document).on("click",".list--main a, .single-navigator a, .ajax-trigger",function(e){e.preventDefault();var i=new g,n=$(e.currentTarget).attr("href");i.navigate(n,!0),$(".list--main a, .navigation--sp a, .single-navigator a").removeClass("active"),$(this).addClass("active"),t.has(E,"show")&&c()});var p=null,g=e.Router.extend({url:"/",routes:{"":"homeAction","works/:id":"worksAction","works/:id/:single":"singleAction","*page":"pageAction"},start:null,history:[],initialize:function(t){void 0===e.history.fragment&&($(x).removeClass("show"),this.start=!0),this.on("all",this.storeRoute)},storeRoute:function(){return this.history.push(e.history.fragment)},previous:function(){this.history.length>3?this.navigate("/"+this.history[this.history.length-3],!0):this.navigate("/",!0)},homeAction:function(t){var e="/";this.switchView(e,w)},pageAction:function(t){var e="/"+t;this.switchView(e,w,t)},defaultWorksAction:function(t){var e="/"+t,i=t.split("/")[2];this.switchView(e,w,i,t),console.log("defaultWorksAction")},worksAction:function(t){var e=this.url+"works/"+t;this.switchView(e,w,t),console.log("worksAction")},singleAction:function(t,e){var i="works/"+t+"/"+e,n=this.url+i;this.switchView(n,w,e,t),console.log("singleAction")},switchView:function(e,n,o,a){function s(){$.ajax({url:e,cache:!1}).done(function(t){function e(t){i.to(m,.4,{y:t.value,alpha:t.alphaValue,ease:Back.easeInOut.config(1.7),transformOrigin:"center left",onComplete:function(){r(n,!0)}})}var n=$(d,$(t));$(u).hasClass("left")?(e({value:"-100%"}),console.log("swipe left")):$(u).hasClass("right")?(e({value:"100%"}),console.log("swipe right")):a?(e({value:"-100%",alphaValue:0}),console.log("single content")):(e({value:0,alphaValue:0}),console.log("main content"))}).fail(function(){alert("error"),t.remove(x,"show")})}function r(t,e){function i(){$(u).removeClass("left").removeClass("right"),$("html,body").animate({scrollTop:0},"slow")}p&&p.remove(),e?($(u).append(t),i(),p=new n({el:t,id:o,category:a,start:!0})):p=new n({el:t,id:o,category:a})}this.start===!0?r(d):s()}}),v=e.Model.extend({urlRoot:"/works/",url:function(){return this.urlRoot+"?name="+this.id},idAttribute:"cid",initialize:function(){}}),f=e.Collection.extend({model:v,url:function(){return this.options.id?this.options.category?"/api/?json=get_post"+this.url_querystring:"about"===this.options.id?"/api/?json=get_page"+this.url_querystring:"/api/?json=get_category_posts"+this.url_querystring:"/api/get_recent_posts/"},initialize:function(t,e){this.options=e,this.url_querystring="&slug="+this.options.id}}),w=e.View.extend({el:$(d),initialize:function(t,e){var i=this;$(this.el).unbind(),_.bindAll(this,"render"),this.category=t.category,this.start=t.start,this.template=_.template($("#template--index").html()),this.collection=new f([],{id:this.id,category:this.category}),this.collection.fetch({success:function(t,e){i.render(e)},error:function(t){console.log(t)},complete:function(t,e){console.log(e)}})},render:function(e){this.category?($(".single-inner").html(this.template({datums:this.collection.toJSON()})),new k({el:this.el,id:this.id,category:this.category,collection:this.collection})):"about"===this.id?($(".content").html(this.template({datums:this.collection.toJSON()})),new b(this.start===!0?{el:this.el,collection:this.collection}:{el:this.el,start:!0,collection:this.collection})):($(".content").html(this.template({datums:this.collection.toJSON()})),new y(this.start===!0?{el:this.el}:{el:this.el,start:!0})),this.start===!0?this.tweenAnim(.5,function(){t.remove(x,"show")}):t.remove(x,"show")},tweenAnim:function(t,e){i.set(m,{y:"0%",opacity:1,delay:t,onComplete:function(){e&&e()}})}}),y=e.View.extend({el:$(d),events:{"click .article-link":"singleAjax","mouseover .article-inner":"articleDisplay"},initialize:function(e,i){console.log("home!!"),this.start=e.start,$(this.el).unbind(),_.bindAll(this,"render","singleAjax","articleDisplay"),(this.start!==!0&&t.has(S,"article-display--single")||t.has(S,"article-display--page"))&&s(S.className="article-display"),this.render()},render:function(t){return this.delegateEvents(),this},singleAjax:function(t){t.preventDefault(),$(this.el).unbind();var e,n=$(t.currentTarget).parents(".article"),o=$(".article").not(n),a=$(".article").length,s=$(window).scrollTop(),r=n.offset().top,c=r-s,l=$(window).height()/2-n.height()/2;e=0>c?l+Math.abs(c):l-Math.abs(c),1===a?i.to(n,.4,{y:e,ease:Circ.easeIn,onComplete:function(){var e=new g,i=$(t.currentTarget).attr("href");e.navigate(i,!0)}}):i.to(o,.6,{alpha:0,onComplete:function(){i.to(n,.4,{y:e,ease:Circ.easeIn,onComplete:function(){var e=new g,i=$(t.currentTarget).attr("href");e.navigate(i,!0)}})}})},articleDisplay:function(t){var e=$(t.currentTarget).find(".article-name").text(),i=$(t.currentTarget).find(".article-category").text(),n=$(t.currentTarget).find("img").attr("src"),o=document.getElementById("card__image"),a=$(t.currentTarget).find("img").attr("height");$(".display-image").attr("xlink:href",n),a&&(1240>a?o.setAttribute("viewBox","400 0 1140 660"):o.setAttribute("viewBox","650 0 650 650")),$("h2").text(e),$(".headline-title__category").text(i)}}),b=e.View.extend({el:$(d),events:{},initialize:function(e){console.log("page"),this.collection=e.collection;var i=this;(this.start!==!0||t.has(S,"article-display--single"))&&s(setTimeout(function(){i.articleDisplay()},1800)),this.render()},render:function(){this.delegateEvents()},articleDisplay:function(){var t=this.collection.toJSON()[0].page.title,e=this.collection.toJSON()[0].page.attachments[0].url,i=(this.collection.toJSON()[0].page.attachments[0].images.full.height,document.getElementById("card__image"));S.className="article-display article-display--page",$(".headline-title__category").text(""),$("h2").text(t),$(".display-image").attr("xlink:href",e),i.setAttribute("viewBox","650 0 650 450")}}),k=e.View.extend({el:$(d),events:{"mouseover .button--share":"svgDraw","click .button--back":"historyBack",swipeleft:"swipeEventLeft",swiperight:"swipeEventRight",scroll:"arrowNav","click #share--facebook":"faceBook"},initialize:function(t){console.log("single");var e=this;$(this.el).unbind(),_.bindAll(this,"svgDraw","render","historyBack","swipeEventLeft","swipeEventRight","arrowNav"),$(window).scroll(this.arrowNav),this.template=_.template($("#template--pager").html()),this.collection=t.collection,this.setWindowSize(),$(".container").attr("style",""),s(S.className="article-display article-display--single"),this.collection.fetch({success:function(i,n){e.render(n,t)},error:function(t){console.log(t)},complete:function(t,e){console.log(e)}})},render:function(t,e){return this.delegateEvents(),this.$el.hammer(),$(".single-navigator").html(this.template({datums:this.collection.toJSON()})),$(".single-navigator a").each(function(){var t=$(this).attr("href"),e="/works/"+t.split("/works/")[1];$(this).attr("href",e)}),this},svgDraw:function(t){var e=t.target;e.getElementsByTagName("animate")[0].beginElement()},historyBack:function(t){t.preventDefault();var e=new g;e.previous()},swipeEventLeft:function(t){var e=$(".single-navigator .navigator-next").attr("href");if(void 0!==e){$(u).addClass("left");var i=new g;i.navigate(e,!0)}},swipeEventRight:function(t){var e=$(".single-navigator .navigator-previous").attr("href");if(void 0!==e){$(u).addClass("right");var i=new g;i.navigate(e,!0)}},arrowNav:function(t){var e=$(t.currentTarget).scrollTop();e>10?i.to(".arrow-down",.4,{alpha:0}):i.to(".arrow-down",.4,{alpha:1})},setWindowSize:function(){var t=$(window).height();$(d).css({top:t})},faceBook:function(t){t.preventDefault();var e=O(this.collection.toJSON()[0].post.title),i=O(this.collection.toJSON()[0].post.excerpt);return window.innerWidth<=800&&window.innerHeight<=600?FB.ui({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:{"og:url":this.collection.toJSON()[0].post.url,"og:title":e,"og:description":i,"og:image":this.collection.toJSON()[0].post.thumbnail}})},function(t){}):FB.ui({method:"feed",name:this.collection.toJSON()[0].post.title,title:this.collection.toJSON()[0].post.title,href:this.collection.toJSON()[0].post.url,link:this.collection.toJSON()[0].post.url,picture:this.collection.toJSON()[0].post.thumbnail,description:this.collection.toJSON()[0].post.excerpt,display:"popup"},function(t){}),!1}});new g,e.emulateHTTP=!0,e.emulateJSON=!0,e.history.start({pushState:!0});var x=document.getElementById("loader"),E=document.getElementById("form--contact"),N=document.getElementById("link--contact"),T=document.getElementById("link--contact-sp"),C=E.querySelector(".contact-trigger"),S=document.getElementById("article-display"),j=$(window).width(),A=$(window).height(),O=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(e)})};n.prototype.addSpace=function(t){return this.set({},{},t)},$.fn.cssHide=function(t,e){var n=t?t:0;return i.to(this,n,{css:{opacity:0,visibility:"hidden"},onComplete:function(){e&&e()}}),!1},$.fn.cssShow=function(t,e){var n=t?t:0;return i.to(this,n,{css:{opacity:1,visibility:"inherit"},onComplete:function(){e&&e()}}),!1},navigator.sayswho=function(){var t,e=navigator.userAgent,i=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],"IE "+(t[1]||"")):"Chrome"===i[1]&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),null!==t)?t.slice(1).join(" ").replace("OPR","Opera"):(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),i.join(" "))}();var q=navigator.sayswho.toLowerCase();document.body.className=document.body.className+" "+q,"ie"===q.split(" ")[0]&&($("body").css({height:A}),$("html").css({overflow:"hidden"}),$(window).resize(function(){A=$(window).height(),$("body").css({height:A})})),768>j?(r(),l(0)):l("18.3%")});